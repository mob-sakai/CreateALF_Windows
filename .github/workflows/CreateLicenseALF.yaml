name: Create ALF File

on: [push]

jobs:
  build-ubuntu:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        unity-version: [2018.4.12f1, 2020.1.0a14]
    steps:
    - uses: pCYSl5EDgo/setup-unity@master
      with:
        unity-version: ${{ matrix.unity-version }}
    #- run: wget https://beta.unity3d.com/download/497f083a43af/UnitySetup -O UnitySetUp
    #- run: sudo chmod +x UnitySetUp
    #- run: ./UnitySetUp --unattended --install-location=/opt/Unity --verbose --download-location=/tmp/unity --components=Unity
    - run: ls -l
    - run: ls -l /opt/
    - run: ls -l /opt/Unity/
    - run: ls -l /opt/Unity/Editor/
    - run: /opt/Unity/Editor/Unity -quit -batchmode -nographics -logfile -createManualActivationFile || exit 0
    - run: cat Unity_v${{ matrix.unity-version }}.alf

  build-windows:
    runs-on: windows-latest
    strategy:
      matrix:
        unity-version: [2018.4.12f1, 2020.1.0a14]
    steps:
    - uses: pCYSl5EDgo/setup-unity@master
      with:
        unity-version: ${{ matrix.unity-version }}
        install-directory: 'C:\'
    - run: dir 'C:\Editor\'
    
  build-mac:
    runs-on: macOS-latest
    strategy:
      matrix:
        unity-version: [2018.4.12f1, 2020.1.0a14]
    steps:
    - uses: pCYSl5EDgo/setup-unity@master
      with:
        unity-version: ${{ matrix.unity-version }}
    - run: ls -l /Applications/Unity/
    
